extends Node

# Level data storage
var levels = {
	"rhythm1": {
		"title": "Catch the Cat",
		"music": "res://assets/audio/song_1.wav", 
		"background_image": "",  # Leave empty for now
		"note_data": "[[2.03600317184448, 3.20933681671143, 4.04133659545898, 4.93733650390625, 7.13466983978272, 7.80666977111816, 9.98267036621094, 11.1880031222534, 14.4840036029053, 15.8386693591309, 16.5106702441406, 17.1613374346924, 17.7693372363281, 19.134670793457, 21.8333364123535, 22.2066693896484, 24.5213361376953, 24.8413358325195, 27.1560025805664, 27.8706708544922, 31.134670793457, 31.8600049609375, 34.4626699084473, 37.7906690234375, 38.4626699084473, 39.134670793457, 42.4093366259766, 45.4706693286133, 46.473335802002, 47.1666684741211, 47.8706708544922, 50.5373349780273, 50.8680043811035, 55.6360021228027, 60.2866712207031, 63.0386701220703, 63.4120069140625, 63.8066678637695, 64.169338762207, 67.1880002612305, 67.8386731738281, 69.0866666430664, 72.4680066699219, 75.1133390063477, 75.7533383959961, 79.0919995898438, 81.4706693286133, 83.5079999560547, 84.169338762207, 85.2146726245117, 85.5560041064453, 88.5213361376953, 89.1613355273438, 97.8120008105469, 104.318668901367, 105.118671953125, 107.06000190918], [-0.54532998855591, 1.66267019454956, 2.83600336257935, 6.15333706085205, 6.8146701449585, 8.52133709136963, 10.516003190918, 12.1586700076294, 13.4920030230713, 15.1560025805664, 18.4413362139893, 19.8173375720215, 21.1400037402344, 21.4920030230713, 22.8573365802002, 23.8173375720215, 24.1693368548584, 25.1613374346924, 26.4840036029053, 28.4893365496826, 30.1640020007324, 30.8360028857422, 33.7906690234375, 34.8360028857422, 37.1613355273438, 40.1373372668457, 41.1613355273438, 43.134670793457, 44.4893384570313, 48.4893384570313, 49.1826711291504, 49.8546681994629, 51.9346700305176, 53.6413350695801, 54.9533353442383, 57.6200032824707, 58.9853368395996, 66.8680005664063, 68.7560010546875, 69.8226667041016, 71.1133390063477, 73.1613355273438, 74.4626737231445, 76.6920056933594, 78.4626737231445, 80.5106702441406, 83.0919995898438, 84.9160047167969, 86.1853376025391, 87.1133390063477, 87.4546704882813, 88.1053357714844, 89.7160001391602, 101.71600013916, 105.822666704102], [5.82266956512451, 6.50533634368897, 8.84133678619385, 10.8680034274292, 11.8173366183472, 12.4573369616699, 13.8333364123535, 16.1586690539551, 18.1106706256104, 18.8040032977295, 19.4866700762939, 20.1586690539551, 20.8200040454102, 22.516003190918, 23.1666703814697, 24.5106702441406, 24.8413358325195, 25.4920030230713, 26.142670213623, 26.7826696032715, 29.2040029162598, 29.8333364123535, 30.5053372973633, 32.4893384570313, 32.8626714343262, 33.1826711291504, 33.4920049304199, 35.1560025805664, 37.4706693286133, 39.8386693591309, 40.4573369616699, 41.7693372363281, 42.7826696032715, 43.4866681689453, 44.1373372668457, 45.1826711291504, 48.5106702441406, 49.1720052355957, 49.8653379077148, 51.1880040759277, 52.990669786377, 54.3133359545898, 56.9373365039063, 58.3346715563965, 59.6360021228027, 61.56667, 66.4840055102539, 68.4146695727539, 69.4386716479492, 70.4840055102539, 72.8200040454102, 73.4600034350586, 74.1106687182617, 74.7613340014648, 76.3400006884766, 77.0866666430664, 77.8226667041016, 79.7640042895508, 80.8306699389648, 81.7906690234375, 84.5213361376953, 85.8653379077148, 86.516003190918, 87.7640042895508, 90.0893369311523, 91.134670793457, 100.22266822998, 102.985333024902, 105.460003435059, 107.433338701172], [0.22266989891052, 7.48667007629395, 8.15867000762939, 9.6200032824707, 13.1720033282471, 16.5106702441406, 17.1613374346924, 17.7906709307861, 20.5106702441406, 23.4866700762939, 25.8546701068115, 29.5133367175293, 31.1560025805664, 31.8813367480469, 35.4653363818359, 36.3400045031738, 38.142670213623, 38.8040052050781, 39.4760022753906, 43.8386693591309, 45.8226705187988, 47.1666684741211, 47.8920026416016, 50.558670579834, 50.8893361682129, 56.3080030078125, 60.990669786377, 64.5213361376953, 65.118671953125, 65.7373395556641, 66.0893369311523, 67.2200055712891, 67.8600049609375, 73.7693372363281, 77.4386716479492, 81.1720014208984, 83.8066678637695, 86.8146710986328, 90.4626737231445, 98.9426694506836, 104.734669267578]]
"
	},
	"rhythm2": {
		"title": "Clean the Cars",
		"music": "res://assets/audio/song_2.wav", 
		"background_image": "",  # Leave empty for now
		"note_data": "[[1.07600037211609, 5.74800054187012, 7.15600053424072, 11.2733339464111, 12.596000114624, 15.2626661455078, 17.3639997636719, 17.7266668474121, 18.1319994127197, 20.1160005723877, 24.9266676103516, 27.2520002519531, 30.5266660844727, 33.3000005876465, 37.3213323747559, 39.2946676408691, 40.4466680681152, 42.4199995195313, 42.9426664506836, 45.2466673051758, 46.473332802002, 48.0519994890137, 48.4146665727539, 52.0733350908203, 54.0786680375977, 54.8573354875488, 55.2733320390625, 55.6786665117188, 56.0733350908203, 56.4679998552246, 58.4626669084473, 58.8786672746582, 59.2733320390625, 59.7000021135254, 62.0786680375977, 66.4626707231445, 71.4013303911133, 73.7800001298828, 76.5000013505859, 77.7159971391602, 80.8946699296875], [0.16245857829285, 2.52666703814697, 6.05733338946533, 6.64400045031738, 8.1266674196167, 8.89466706866455, 12.03066674823, 13.0973333513184, 14.142667213623, 16.1586660539551, 19.3800005113525, 20.8520006334229, 23.2626661455078, 23.998666206543, 26.558667579834, 27.8280004655762, 29.652001777832, 30.9213346635742, 32.9800008928223, 35.4440015947266, 36.5960020219727, 37.7266668474121, 38.9320005571289, 40.0519994890137, 41.2253355180664, 42.0466665422363, 43.3159994279785, 44.5000013505859, 45.652001777832, 46.8786672746582, 47.6573347246094, 48.8093351518555, 51.3266653215332, 52.574666420166, 53.3213323747559, 61.6626676713867, 63.2733320390625, 63.6573347246094, 64.0626691972656, 64.446664253418, 68.0199979936523, 71.7640012895508, 73.3959974443359, 74.6226667558594, 77.2999967729492, 78.6226667558594, 79.7106641923828, 80.5213331376953, 82.6226667558594], [-0.95066638832855, 1.82266704196167, 3.26266709918213, 4.83066693896484, 6.34533349627686, 6.93200055712891, 7.42266694659424, 8.46800080889892, 9.577333847229, 12.3720001375122, 12.8306669389648, 13.6519998704834, 14.3453344499512, 16.9586671983643, 18.5479997789307, 21.1720003282471, 22.4520010148926, 25.7480005418701, 28.2440008317871, 30.1960004960937, 31.2733320390625, 32.1480001604004, 34.4946684038086, 36.2226652299805, 36.9800008928223, 37.3213323747559, 38.4306654130859, 39.7000021135254, 40.8626684343262, 41.652001777832, 42.4199995195313, 42.9426664506836, 43.6680006181641, 44.0626653825684, 44.8733343278809, 46.099999824707, 46.6760000383301, 47.0813345109863, 48.4253324663086, 49.523999611084, 50.5266660844727, 52.9586652910156, 53.6946653520508, 58.473332802002, 58.8786672746582, 59.2733320390625, 59.7106680070801, 60.1159986650391, 60.5000013505859, 60.8946661149902, 61.2466673051758, 62.8786634599609, 64.8626646196289, 72.1480039750977, 72.9693311845703, 76.0520033037109, 78.2493299638672, 78.9426664506836, 80.0733350908203, 84.3506635820312, 87.5933317338867], [4.00933353060913, 7.82800046557617, 10.6013340150757, 13.9719995653076, 14.5266660844727, 17.7480005418701, 18.1319994127197, 21.6946672593994, 24.9586671983643, 28.9266676103516, 31.7319997941895, 35.9026655351563, 38.4520010148926, 44.0946668779297, 47.3053335344238, 50.1213354265137, 54.473332802002, 56.8733343278809, 57.2466673051758, 57.6626676713867, 58.099999824707, 60.0946668779297, 60.5106672441406, 60.9160017167969, 61.2786688005371, 62.4626707231445, 69.7053312456055, 72.5639967119141, 76.9053358232422, 79.3480009233398, 85.9186643754883]]
		"
	},
	"rhythm3": {
		"title": "Chase the Robber",
		"music": "res://assets/audio/song_3.wav", 
		"background_image": "", 
		"note_data": "[[0.92666689509583, 3.54000035876465, 5.23600045794678, 9.14000074023437, 9.46000043505859, 9.83333341235351, 10.1853336488647, 17.6839994584961, 20.9159998094482, 21.609334388916, 23.3906664049072, 24.084000984375, 26.9533342515869, 28.4360002672119, 28.7879995500488, 32.6919988786621, 34.8040022050781, 35.5186666643066, 38.0360006486816, 38.7613348161621, 44.7879995500488, 45.5026678239746, 50.5373319780273, 51.2840017473145, 53.3639997636719, 54.0893339311523, 57.6200002824707, 59.1666654741211, 62.7399992143555, 63.0599989091797, 66.9853300249023, 68.7666639482422, 70.9213346635742, 71.6360029375, 74.8146680986328, 75.2093366777344, 75.5613340532227, 75.9026655351562, 76.9906706010742, 80.585336128418, 82.686669746582, 86.2920011674805, 86.9853300249023, 90.4626707231445], [2.05733386630249, 5.88666669482422, 7.68933335894775, 10.8680004274292, 12.7133335267944, 14.7826666032715, 16.2546667253418, 19.8066667711182, 24.8200010454102, 25.2359995042725, 25.4386667406006, 25.6200002824707, 25.8119997178955, 25.9826673662109, 30.5053342973633, 31.9880003129883, 33.0546659624023, 34.1213354265137, 34.4839986955566, 36.2119993364258, 37.7053350603027, 39.4226659929199, 40.542668739502, 41.2146658098145, 41.9720014726563, 42.6866659318848, 46.2706655656738, 49.1400007402344, 55.5186666643066, 56.3080000078125, 60.5853323137207, 61.2893346940918, 61.6626676713867, 64.8413328325195, 68.0413374101562, 69.8653349077148, 71.9666685258789, 72.6386655961914, 76.2546705400391, 78.3880018388672, 78.7613310014648, 81.2573331987305, 83.4120039140625, 87.6680006181641, 88.4040006791992, 91.7533353959961], [1.63066712969971, 2.43066684359741, 4.19066707247925, 5.58800069445801, 6.23866693133545, 8.34000054949951, 10.516000190918, 11.2200006639404, 11.9880003129883, 14.0893339311523, 15.1559995805664, 15.9133333360596, 16.9693330919189, 19.1026662980957, 20.5853342210693, 21.2893327867432, 21.9613336717529, 22.6333345567627, 26.2599996721191, 27.3586668168945, 28.062667289917, 28.617333809082, 28.9373335039062, 29.4600004350586, 30.142667213623, 30.8359998857422, 31.4546674882812, 31.7853330766602, 32.3400015031738, 33.4066671525879, 33.7693342363281, 37.0119985734863, 38.4199995195313, 39.1133321916504, 39.7640012895508, 40.8626684343262, 41.6200002824707, 43.3906683122559, 44.1373342668457, 46.9426664506836, 48.3826688920898, 49.8546651994629, 51.9026655351563, 54.068002144043, 54.8146680986328, 55.5186666643066, 56.9586652910156, 59.1666654741211, 59.8919996416016, 60.9373335039063, 62.014665046875, 62.3666700517578, 64.1053327714844, 66.2706693803711, 67.6680006181641, 68.4573301469727, 70.5373319780273, 71.2839979326172, 72.2866682207031, 73.0120023881836, 76.6599973833008, 77.3533338701172, 78.014665046875, 79.1240018999023, 81.9400037919922, 84.1159986650391, 85.4919981157227, 86.6226667558594, 87.3373350297852, 88.4040006791992, 89.0866636430664, 89.7159971391602, 91.1133360063477], [2.74000016802979, 4.8626670038147, 6.94266740435791, 11.5613340532227, 13.4066671525879, 15.5613340532227, 18.4093336259766, 22.3026670610352, 22.9853338395996, 23.4120000993652, 24.1053327714844, 27.6893343126221, 29.1613344346924, 29.8120016252441, 31.3053335344238, 31.6359991228027, 35.1666654741211, 35.8600019609375, 40.1373342668457, 47.582665840332, 52.6066679155273, 53.3853353654785, 54.8040022050781, 59.9026655351563, 63.3906644975586, 65.5879987871094, 69.0866636430664, 73.4066633378906, 73.7373365556641, 74.0893339311523, 74.4626707231445, 77.7053312456055, 79.8173307573242, 84.8200010454102, 89.1080030595703, 89.7159971391602]]
		"
	},
	"rhythm4": {
		"title": "4",
		"music": "res://assets/audio/song_4.wav", 
		"background_image": "", 
		"note_data": "[[6.24933377856445, 8.38266698474121, 11.6466669237061, 16.553332725708, 17.4066671525879, 19.508000770752, 23.5613340532227, 24.7453340684814, 27.2626661455078, 28.5320009385986, 29.7479986345215, 30.9533323442383, 32.1800016557617, 33.4066671525879, 34.6760000383301, 35.8600019609375, 38.3773321306152, 40.3933347856445, 45.7479986345215, 46.9533323442383, 52.3080000078125, 55.998666206543, 56.8519987260742, 57.6733335649414, 59.3480009233398, 60.53199903125, 61.4279989396973, 63.4120039140625, 66.7080015336914, 71.6786665117187, 75.3586668168945], [1.35333363169861, 5.01200048083496, 7.94533387774658, 10.0360006486816, 11.2626670991821, 13.7266668474121, 18.2599996721191, 21.0759996568604, 23.1239999925537, 24.3506673967285, 26.0466665422363, 30.1533331071777, 30.558667579834, 33.8546651994629, 34.2599996721191, 37.1293348466797, 39.625333229248, 41.2466673051758, 44.574666420166, 46.558667579834, 48.2440008317871, 49.8546651994629, 50.6439985429688, 51.508000770752, 53.107999244873, 53.5560011064453, 53.9826673662109, 55.593335548584, 56.4253324663086, 61.8333372270508, 63.0280012285156, 65.0440000688477, 67.9239973222656, 70.8040022050781, 72.446664253418, 73.2999967729492, 73.7053312456055, 76.1480039750977], [0.10533372515869, 3.80666677111816, 7.50800077075195, 8.79866735095215, 10.8573335802002, 12.5000003969116, 14.9533342515869, 17.0440000688477, 18.6546663438721, 20.6813329851074, 21.9293340837402, 23.9773344194336, 25.609334388916, 26.4626669084473, 26.8573335802002, 28.8946661149902, 29.3320001756592, 32.5960020219727, 33.033334175293, 36.2759985124512, 36.7453321611328, 37.9826673662109, 39.2306684648438, 39.998666206543, 40.8093351518555, 41.6733335649414, 43.2733320390625, 46.1533331071777, 47.8280004655762, 49.0546659624023, 50.2493337785645, 51.9240011369629, 52.7026685869141, 54.3773321306152, 55.2093328630371, 56.8306669389648, 57.7479986345215, 58.1106657182617, 58.9106687700195, 59.7319997941895, 62.6120008623047, 64.2760023271484, 65.4600004350586, 69.1506666337891, 71.2520002519531, 72.8733305131836, 74.099999824707, 74.5053342973633, 75.7746671831055], [2.61200038546753, 9.6519998704834, 12.0946668779297, 16.1586660539551, 17.4493345415039, 22.3560003435059, 24.7986673509521, 27.7106660997314, 28.1053327714844, 31.4013342058105, 31.8066686784668, 35.0599989091797, 35.508000770752, 42.1960004960938, 49.481332222168, 58.1320013200684, 58.9320005571289, 60.1480001604004, 60.5533346330566, 61.4279989396973, 66.3239988481445, 70.4093336259766, 74.9000028764648]]
"
	},
	"rhythm5": {
		"title": "5",
		"music": "res://assets/audio/song_5.wav", 
		"background_image": "", 
		"note_data": "[[0.5, 1.0, 1.5],[0.7, 1.2, 1.7],[0.9, 1.4, 1.9],[1.1, 1.6, 2.1]]"
	},
	"rhythm6": {
		"title": "6",
		"music": "res://assets/audio/song_6.wav", 
		"background_image": "", 
		"note_data": "[[0.5, 1.0, 1.5],[0.7, 1.2, 1.7],[0.9, 1.4, 1.9],[1.1, 1.6, 2.1]]"
	},
	"rhythm7": {
		"title": "7",
		"music": "res://assets/audio/song_7.wav", 
		"background_image": "", 
		"note_data": "[[0.5, 1.0, 1.5],[0.7, 1.2, 1.7],[0.9, 1.4, 1.9],[1.1, 1.6, 2.1]]"
	},
	"rhythm8": {
		"title": "8",
		"music": "res://assets/audio/song_8.wav", 
		"background_image": "", 
		"note_data": "[[0.5, 1.0, 1.5],[0.7, 1.2, 1.7],[0.9, 1.4, 1.9],[1.1, 1.6, 2.1]]"
	},
	"rhythm9": {
		"title": "9",
		"music": "res://assets/audio/song_9.wav", 
		"background_image": "", 
		"note_data": "[[0.5, 1.0, 1.5],[0.7, 1.2, 1.7],[0.9, 1.4, 1.9],[1.1, 1.6, 2.1]]"
	}
}

# Currently active level
var current_level = ""
var game_in_progress = false

# Connect to necessary signals
func _ready():
	# Connect to signals
	Signals.StartRhythmGame.connect(start_rhythm_game)
	print("RhythmGameManager ready and signals connected")

# Function to start a rhythm game level
func start_rhythm_game(level_id):
	print("RhythmGameManager received start request for: " + level_id)
	
	if level_id in levels:
		current_level = level_id
		game_in_progress = true
		
		# Get the level editor node
		var level_editor = get_node_or_null("../LevelEditor")
		if level_editor == null:
			print("ERROR: Could not find Level editor node!")
			return
			
		print("Found level editor, loading level data")
		
		# Call the level editor's load method directly
		level_editor.load_rhythm_level(levels[level_id])
	else:
		print("Error: Level " + level_id + " not found!")
