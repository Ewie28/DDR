extends Node

# Level data storage
var levels = {
	"rhythm1": {
		"title": "Catch the Cat",
		"music": "res://assets/audio/song_1.wav", 
		"background_images": ["res://assets/rhythm/rightImages/1_1.png", 
		"res://assets/rhythm/rightImages/1_3.png", "res://assets/rhythm/rightImages/1_2.png"
		],
		"note_data": "[
  [2.03600317184448, 3.20933681671143, 4.04133659545898, 4.93733650390625, 7.13466983978272, 7.80666977111816, 9.98267036621094, 11.1880031222534, 14.4840036029053, 15.8386693591309, 16.5106702441406, 17.1613374346924, 17.7693372363281, 19.134670793457, 21.8333364123535, 22.2066693896484, 24.5213361376953, 24.8413358325195, 27.1560025805664, 27.8706708544922, 31.134670793457, 31.8600049609375, 34.4626699084473, 36.3400045031738],
  [-0.54532998855591, 1.66267019454956, 2.83600336257935, 6.15333706085205, 6.8146701449585, 8.52133709136963, 10.516003190918, 12.1586700076294, 13.4920030230713, 15.1560025805664, 18.4413362139893, 19.8173375720215, 21.1400037402344, 21.4920030230713, 22.8573365802002, 23.8173375720215, 24.1693368548584, 25.1613374346924, 26.4840036029053, 28.4893365496826, 30.1640020007324, 30.8360028857422, 33.7906690234375, 34.8360028857422, 36.3080030078125],
  [5.82266956512451, 6.50533634368897, 8.84133678619385, 10.8680034274292, 11.8173366183472, 12.4573369616699, 13.8333364123535, 16.1586690539551, 18.1106706256104, 18.8040032977295, 19.4866700762939, 20.1586690539551, 20.8200040454102, 22.516003190918, 23.1666703814697, 24.5106702441406, 24.8413358325195, 25.4920030230713, 26.142670213623, 26.7826696032715, 29.2040029162598, 29.8333364123535, 30.5053372973633, 32.4893384570313, 32.8626714343262, 33.1826711291504, 33.4920049304199, 35.1560025805664, 36.3400006884766],
  [0.22266989891052, 7.48667007629395, 8.15867000762939, 9.6200032824707, 13.1720033282471, 16.5106702441406, 17.1613374346924, 17.7906709307861, 20.5106702441406, 23.4866700762939, 25.8546701068115, 29.5133367175293, 31.1560025805664, 31.8813367480469, 35.4653363818359, 36.3400045031738]
]
",
		"win_text": "This cat's bounty money will pay off today's rent!",
		"lose_text": "Fail... couldn't catch the cat. Gotta sell some furniture to pay off rent ..."
	},
	"rhythm2": {
		"title": "Lawn mower",
		"music": "res://assets/audio/song_2.wav", 
		"background_images": ["res://assets/rhythm/rightImages/3_1.png", "res://assets/rhythm/rightImages/3_2.png", "res://assets/rhythm/rightImages/3_3.png"
		], 
		"note_data": "[
  [1.07600037211609, 5.74800054187012, 7.15600053424072, 11.2733339464111, 12.596000114624, 15.2626661455078, 17.3639997636719, 17.7266668474121, 18.1319994127197, 20.1160005723877, 24.9266676103516, 27.2520002519531, 30.5266660844727, 33.3000005876465, 37.3213323747559],
  [0.16245857829285, 2.52666703814697, 6.05733338946533, 6.64400045031738, 8.1266674196167, 8.89466706866455, 12.03066674823, 13.0973333513184, 14.142667213623, 16.1586660539551, 19.3800005113525, 20.8520006334229, 23.2626661455078, 23.998666206543, 26.558667579834, 27.8280004655762, 29.652001777832, 30.9213346635742, 32.9800008928223, 35.4440015947266, 36.5960020219727, 37.7266668474121],
  [-0.95066638832855, 1.82266704196167, 3.26266709918213, 4.83066693896484, 6.34533349627686, 6.93200055712891, 7.42266694659424, 8.46800080889892, 9.577333847229, 12.3720001375122, 12.8306669389648, 13.6519998704834, 14.3453344499512, 16.9586671983643, 18.5479997789307, 21.1720003282471, 22.4520010148926, 25.7480005418701, 28.2440008317871, 30.1960004960937, 31.2733320390625, 32.1480001604004, 34.4946684038086, 36.2226652299805, 36.9800008928223, 37.3213323747559],
  [4.00933353060913, 7.82800046557617, 10.6013340150757, 13.9719995653076, 14.5266660844727, 17.7480005418701, 18.1319994127197, 21.6946672593994, 24.9586671983643, 28.9266676103516, 31.7319997941895, 35.9026655351563, 38.4520010148926, 44.0946668779297, 47.3053335344238]
]",
		"win_text": "Grass mowed! Now I've got money for my pokemon cards:D",
		"lose_text": "I suck at mowing... gotta sell some furniture to afford those Pokemon cards..."
	},
	"rhythm3": {
		"title": "Chase the Robber",
		"music": "res://assets/audio/song_3.wav", 
		"background_images": ["res://assets/rhythm/rightImages/4_1.png", "res://assets/rhythm/rightImages/4_2.png", "res://assets/rhythm/rightImages/4_3.png"], 
		"note_data": "[
  [0.92666689509583, 3.54000035876465, 5.23600045794678, 9.14000074023437, 9.46000043505859, 9.83333341235351, 10.1853336488647, 17.6839994584961, 20.9159998094482, 21.609334388916, 23.3906664049072, 24.084000984375, 26.9533342515869, 28.4360002672119, 28.7879995500488, 32.6919988786621, 34.8040022050781, 35.5186666643066, 38.0360006486816, 38.7613348161621, 44.7879995500488, 45.5026678239746],
  [2.05733386630249, 5.88666669482422, 7.68933335894775, 10.8680004274292, 12.7133335267944, 14.7826666032715, 16.2546667253418, 19.8066667711182, 24.8200010454102, 25.2359995042725, 25.4386667406006, 25.6200002824707, 25.8119997178955, 25.9826673662109, 30.5053342973633, 31.9880003129883, 33.0546659624023, 34.1213354265137, 34.4839986955566, 36.2119993364258, 37.7053350603027, 39.4226659929199, 40.542668739502, 41.2146658098145, 41.9720014726563, 42.6866659318848, 46.2706655656738],
  [1.63066712969971, 2.43066684359741, 4.19066707247925, 5.58800069445801, 6.23866693133545, 8.34000054949951, 10.516000190918, 11.2200006639404, 11.9880003129883, 14.0893339311523, 15.1559995805664, 15.9133333360596, 16.9693330919189, 19.1026662980957, 20.5853342210693, 21.2893327867432, 21.9613336717529, 22.6333345567627, 26.2599996721191, 27.3586668168945, 28.062667289917, 28.617333809082, 28.9373335039062, 29.4600004350586, 30.142667213623, 30.8359998857422, 31.4546674882812, 31.7853330766602, 32.3400015031738, 33.4066671525879, 33.7693342363281, 37.0119985734863, 38.4199995195313, 39.1133321916504, 39.7640012895508, 40.8626684343262, 41.6200002824707, 43.3906683122559, 44.1373342668457, 46.9426664506836],
  [2.74000016802979, 4.8626670038147, 6.94266740435791, 11.5613340532227, 13.4066671525879, 15.5613340532227, 18.4093336259766, 22.3026670610352, 22.9853338395996, 23.4120000993652, 24.1053327714844, 27.6893343126221, 29.1613344346924, 29.8120016252441, 31.3053335344238, 31.6359991228027, 35.1666654741211, 35.8600019609375, 40.1373342668457, 47.582665840332]
]",
		"win_text": "I stopped the thief! And got money for rent!!",
		"lose_text": "The thief got away... and so did my rent money... gotta sell some furniture... "
	},
	"rhythm4": {
		"title": "dance juggle",
		"music": "res://assets/audio/song_4.wav", 
		"background_images": ["res://assets/rhythm/rightImages/6_1.png", "res://assets/rhythm/rightImages/6_2.png"], 
		"note_data": "[
  [6.24933377856445, 8.38266698474121, 11.6466669237061, 16.553332725708, 17.4066671525879, 19.508000770752, 23.5613340532227, 24.7453340684814, 27.2626661455078, 28.5320009385986, 29.7479986345215, 30.9533323442383, 32.1800016557617, 33.4066671525879],
  [1.35333363169861, 5.01200048083496, 7.94533387774658, 10.0360006486816, 11.2626670991821, 13.7266668474121, 18.2599996721191, 21.0759996568604, 23.1239999925537, 24.3506673967285, 26.0466665422363, 30.1533331071777, 30.558667579834, 33.8546651994629],
  [0.10533372515869, 3.80666677111816, 7.50800077075195, 8.79866735095215, 10.8573335802002, 12.5000003969116, 14.9533342515869, 17.0440000688477, 18.6546663438721, 20.6813329851074, 21.9293340837402, 23.9773344194336, 25.609334388916, 26.4626669084473, 26.8573335802002, 28.8946661149902, 29.3320001756592, 32.5960020219727, 33.033334175293],
  [2.61200038546753, 9.6519998704834, 12.0946668779297, 16.1586660539551, 17.4493345415039, 22.3560003435059, 24.7986673509521, 27.7106660997314, 28.1053327714844, 31.4013342058105, 31.8066686784668]
]",
		"win_text": "They liked my tricks AND my moves ;> That's gym membership money!",
		"lose_text": "My act needs more practice...bye bye furniture... gotta afford the gym membership..."
	},
	"rhythm5": {
		"title": "janitor mop",
		"music": "res://assets/audio/song_5.wav", 
		"background_images": ["res://assets/rhythm/rightImages/5_1.png", "res://assets/rhythm/rightImages/5_2.png", "res://assets/rhythm/rightImages/5_3.png"], 
		"note_data": "[
  [4.99027214204712, 6.59018144761963, 9.21403608476562, 9.80068025743408, 15.0910655037109, 19.7201357856934, 21.8426981941406, 26.0878001228516, 27.1437407509033, 31.3461886421387, 31.6128588691895, 31.8901606575195, 32.1674815193359, 34.9939890876953],
  [-0.23612251127319, 2.31306133424683, 5.51290235673828, 7.63546476518555, 10.8352833763306, 12.9471655861084, 20.8187533394043, 22.9199782386963, 24.4878912941162, 24.9998637214844, 25.543831922168, 29.298298932666, 30.2475977913086, 33.9913836494629],
  [0.9158049598877, 2.88904771959229, 4.01963720476074, 6.04621324693604, 7.11281213914795, 8.16875276719971, 10.291315175647, 11.3472558036987, 12.3712016121094, 13.491133786792, 16.669636823291, 18.1415644661133, 20.2854414955322, 21.3200675026123, 22.3866663948242, 23.4639464393799, 26.0451479927246, 27.1437407509033, 27.6877318397705, 28.7329932228271, 30.7915659919922, 34.5140353218262],
  [1.3531292453949, 1.84376440202637, 4.48895702516479, 8.70206365739746, 9.21403608476562, 9.82199583208008, 11.8698864952271, 18.1522227302734, 23.9865752235596, 27.7197276130859, 28.7436743751709, 32.4128123298828, 32.9354411140625, 33.2341052070801, 33.50074873125, 33.7673922554199]
]",
		"win_text": "All clean! paycheck acquired! $$$ for my water bill ^_^",
		"lose_text": "No paycheck... my water bill is astronomical... good thing furniture goes for quite a bit..."
	},
	"rhythm6": {
		"title": "dog",
		"music": "res://assets/audio/song_6.wav", 
		"background_images": ["res://assets/rhythm/rightImages/8_1.png", "res://assets/rhythm/rightImages/8_2.png", "res://assets/rhythm/rightImages/8_3.png"], 
		"note_data": "[
  [0.57466659700317, 2.61200008546753, 4.9266668335144, 7.50800047075195, 9.95066652452392, 13.545333005542, 16.2546664253418, 17.1720000282471, 20.1053324714844, 23.1239996925537, 23.4439993873779, 23.7533331886475, 24.0519991890137, 25.4919997230713, 26.078665830249, 27.0280009285156, 27.5719996467773],
  [3.92399988328857, 4.62799987947388, 7.80666647111816, 8.42533311998291, 9.33199987565918, 12.3293334022705, 12.606666661853, 12.9266663566772, 13.2466670051758, 14.1106673256104, 16.5320006385986, 18.580000974292, 19.2093325630371, 20.7240000740234, 21.054667569751, 21.3960009590332, 21.6733332649414, 26.7506667152588],
  [3.45466671144409, 4.25466690217895, 6.34533319627686, 8.1266671196167, 8.70266637956543, 9.63066682969971, 9.96133337175293, 11.10266695177, 13.8226672187988, 14.3986674324219, 15.9453326240723, 16.8093329445068, 18.2599993721191, 18.9000006691162, 21.9613333717529, 22.2813330665771, 22.558667279834, 22.8786669746582, 27.3266669288818, 27.9026671425049],
  [1.67333326494141, 4.94800005113525, 9.02266702806396, 11.10266695177, 14.7079993263428, 19.52933416521, 20.1266661659424, 24.3293334022705, 24.6493330970947, 24.9479990974609, 25.2466670051758, 25.4919997230713, 26.078665830249]
]	",
		"win_text": "Bills were DUE but I GOT THAT DOG IN ME!",
		"lose_text": "Can't make my gas bill... There goes my favourite piece of furniture..."
	},
	"rhythm7": {
		"title": "car",
		"music": "res://assets/audio/song_7.wav", 
		"background_images": ["res://assets/rhythm/rightImages/7_1.png", "res://assets/rhythm/rightImages/7_2.png", "res://assets/rhythm/rightImages/7_3.png", "res://assets/rhythm/rightImages/7_4.png"], 
		"note_data": "[
  [5.9608841911499, 6.34485254442139, 10.0353289619629, 10.867279149646, 11.2832652107422, 12.4992066398804, 12.8938323036377, 15.7417002693359, 17.4375964180176, 25.7358275428955, 25.9384814277832, 26.1304770485107, 26.3224707618896, 26.5357829109375, 26.7384348884766, 26.9304305092041, 27.1224261299316, 32.2208148018066, 34.2687083259766, 36.796574689502, 40.5403643623535, 40.7643519416992, 40.9776888862793, 41.1909991279785, 41.3936511055176, 41.5963259712402, 41.7989779487793, 41.9589587227051],
  [4.26496610795898, 4.69160995637817, 7.56079397355957, 7.97678003465576, 8.79805002366943, 11.6885710731689, 12.09387788927, 14.1311102882568, 14.568411923999, 16.1896601692383, 16.96829900896, 20.6907702461426, 24.242562390918, 24.4878912941162, 24.7118826881592, 24.9358721748535, 25.1385260597412, 25.3411799446289, 25.5331755653564, 30.599568463916, 33.8847170845215, 35.0900012031738, 36.4659167305176, 38.8658038154785, 39.0791140571777, 39.2924471870605, 39.5164156929199, 39.6977549568359, 39.9110651985352],
  [0.99047622835083, 5.13959179078979, 5.52356014406128, 8.39274416124267, 9.15004549180908, 10.4406348243896, 13.320476628894, 13.7258044258301, 14.9310656562988, 15.3363715187256, 16.6163035408203, 19.1121760383789, 27.3464175239746, 27.5490695015137, 27.7410422340576, 27.9650336281006, 28.146370984668, 28.3703623787109, 28.5410204902832, 28.7436743751709, 31.4101801887695, 34.6633578315918, 35.5166445747559, 37.1805430427734],
  [2.69705209886475, 6.7395010963623, 7.16614542161865, 9.56600866472168, 12.5205212608521, 12.915169812793, 14.941723920459, 15.3470526710693, 22.3653288856689, 28.9356471077148, 29.1489802375977, 29.3622904792969, 29.5649653450195, 29.7889338508789, 29.9916087166016, 30.2155772224609, 30.4182559028809, 33.0421076790039, 35.9646273628418]
]",
		"win_text": "Car's clean im keen! Rent is spent, no need to vent! ",
		"lose_text": "I was never good at cleaning..."
	},
	"rhythm8": {
		"title": "maccas",
		"music": "res://assets/audio/song_8.wav", 
		"background_images": ["res://assets/rhythm/rightImages/2_1.png", 
		"res://assets/rhythm/rightImages/2_2.png"], 
		"note_data": "[
  [0.13718829309387, 8.28607759630127, 12.5204993263428, 18.7068472877686, 19.1335154548828, 19.5601359382812, 20.0721083656494, 22.8559638038818, 23.3359633461182, 23.8052607551758, 26.1838103309814, 27.1330615059082, 33.6500674263184, 34.5993662849609, 35.5379611030762],
  [5.00090704118652, 7.43278894578857, 9.27800474321289, 10.6859408394043, 11.5712471977417, 12.9898415580933, 14.8350573555176, 20.5307475105469, 21.4587298408691, 22.4079810157959, 24.519864179248, 24.9892054573242, 25.4585028663818, 25.9278002754395, 28.0183669105713, 31.772835828418, 32.2314730659668, 32.7114268318359, 33.2020846382324],
  [3.08099756395264, 5.60888872301025, 7.77410421525879, 8.81936464464111, 9.75800428544922, 11.1019049659912, 12.0512019172852, 13.9711104408447, 16.7549658790771, 20.989388562793, 21.9280272499268, 24.2852145210449, 24.7758723274414, 25.2345133796875, 25.7038088813965, 29.9275752083008, 30.8235369697754, 31.324853040332],
  [1.37442169343872, 6.93147382890625, 10.2379590049927, 22.866622068042, 23.3572798744385, 23.8159190193359, 27.5810423866455, 29.4263030067627]
]",
		"win_text": "Clocking off! That'll cover the electric bill.",
		"lose_text": "Theres no happy in my happy meal :( gotta sell some furniture for the electric bill..."
	},
	"rhythm9": {
		"title": "parcel",
		"music": "res://assets/audio/song_9.wav", 
		"background_images": ["res://assets/rhythm/rightImages/9_1.png", "res://assets/rhythm/rightImages/9_2.png", "res://assets/rhythm/rightImages/9_3.png", "res://assets/rhythm/rightImages/9_4.png", "res://assets/rhythm/rightImages/9_5.png"], 
		"note_data": "[
  [0.58533344423218, 2.58000002061768, 2.9106665626709, 6.23866663133545, 6.60133371507568, 6.97466669237061, 7.92399988328857, 9.25733289873047, 9.95066652452392, 10.2706671730225, 10.5586663261597, 10.8573332802002, 11.1239996925537, 13.9719992653076, 14.5906668678467, 15.2306662574951, 15.5719996467773, 15.9240008369629, 16.2440005317871, 17.9293337837402, 18.2599993721191, 18.558667279834, 18.9106665626709, 21.2573328987305, 21.9399996772949, 22.6013327614014, 23.2733336464111, 23.9240008369629],
  [-0.07599987829285, 1.58799991762085, 2.23866663133545, 3.25199995195312, 3.60400018846436, 5.577333547229, 5.95066652452393, 7.60400018846436, 8.93733320390625, 11.3266669288818, 16.9053336158936, 19.2306662574951, 24.6066676155273, 25.2253333107178, 25.9399996772949, 26.5906668678467, 27.2733336464111, 27.8813334480469, 28.574666120166, 29.3000002876465, 35.2093325630371, 40.53199873125, 40.8839999214355, 41.2360011116211, 41.5879984871094, 41.9399996772949, 42.2706652656738, 42.6439982429687, 42.9533320442383, 48.574666120166, 51.177334882373, 51.539998151416, 51.8919993416016, 52.2440005317871],
  [-0.72666659200745, 1.25733337556763, 1.94000015413208, 3.90266666566772, 4.88399992143555, 5.25733337556763, 7.25199995195312, 9.58800039445801, 10.1000004783813, 10.4413329139893, 10.7080002800171, 10.9533329979126, 11.6040001884644, 12.2013331428711, 12.7559996620361, 13.0866671577637, 13.4279995933716, 13.6946669593994, 13.9719992653076, 16.5426665321533, 17.2466670051758, 17.5773325935547, 19.9880000129883, 28.9053336158936, 29.5773325935547, 29.9506655708496, 30.2386675850098, 30.590664960498, 30.8999987617676, 31.5719996467773, 32.2226649299805, 33.8546648994629, 34.5266657844727, 35.8919993416016, 36.5213328376953, 37.1506663337891, 37.8866663948242, 38.558667279834, 39.177334882373, 39.7746668831055],
  [0.95866665994568, 4.20133314287109, 4.58533344423218, 8.60666666185303, 11.9026671425049, 12.585332967395, 12.9799996391479, 13.2253333107178, 13.5346671119873, 13.8226672187988, 14.2706671730225, 14.9213324562256, 15.2306662574951, 15.60399923479, 15.9026671425049, 16.2440005317871, 20.660000897998, 32.5213328376953, 32.9053317085449, 33.1826678291504, 33.5346652046387, 34.2066660896484, 34.8573351875488],
]",
		"win_text": "Package delivered. Got a huge tip. I can afford Crunchyroll!",
		"lose_text": "Gotta afford Crunchyroll... There goes my favourite piece of furniture..."
	}
}

# Currently active level
var current_level = ""
var game_in_progress = false

# Connect to necessary signals
func _ready():
	# Connect to signals
	Signals.StartRhythmGame.connect(start_rhythm_game)
	print("RhythmGameManager ready and signals connected")

# Function to start a rhythm game level
func start_rhythm_game(level_id):
	print("RhythmGameManager received start request for: " + level_id)
	
	if level_id in levels:
		current_level = level_id
		game_in_progress = true
		
		# Get the level editor node
		var level_editor = get_node_or_null("../LevelEditor")
		if level_editor == null:
			print("ERROR: Could not find Level editor node!")
			return
			
		print("Found level editor, loading level data")
		
		# Call the level editor's load method directly
		level_editor.load_rhythm_level(levels[level_id])
	else:
		print("Error: Level " + level_id + " not found!")
